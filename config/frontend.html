<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>18.X Kernel Setup Wizard</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 700px; margin: 20px auto; }
    h1 { color: #2b5d82; }
    li { margin: 12px 0; padding: 10px; background: #f4f4f4; border-radius: 8px; }
    .done { text-decoration: line-through; color: #666; }
    button { float: right; padding: 4px 8px; }
    #status { margin-top: 20px; padding: 10px; background: #e0ffe0; border: 1px solid #a3dca3; border-radius: 6px; }
  </style>
</head>
<body>
  <h1>18.X Kernel Setup Wizard</h1>
  <p>Click "Run" for each step. The backend handles everything automatically.</p>

  <ul id="checklist">
    <li>Provision VM with NVIDIA GPU <button onclick="runStep(1,this)">Run</button></li>
    <li>Install NVIDIA drivers & CUDA <button onclick="runStep(2,this)">Run</button></li>
    <li>Install Miniconda <button onclick="runStep(3,this)">Run</button></li>
    <li>Create <code>18x_kernel</code> environment <button onclick="runStep(4,this)">Run</button></li>
    <li>Install JAX with GPU support <button onclick="runStep(5,this)">Run</button></li>
    <li>Install supporting libraries <button onclick="runStep(6,this)">Run</button></li>
    <li>Create <code>run_18x_kernel.py</code> file <button onclick="runStep(7,this)">Run</button></li>
    <li>Verify GPU detection <button onclick="runStep(8,this)">Run</button></li>
    <li>Run the 18.X Kernel pipeline <button onclick="runStep(9,this)">Run</button></li>
  </ul>

  <div id="status">Status: 0 of 9 steps completed.</div>

  <script>
    let completed = 0;
    async function runStep(step, btn) {
      btn.disabled = true;
      btn.textContent = "Running...";
      // Hidden call to Python backend
      await fetch(`/run_step/${step}`, {method: "POST"});
      btn.parentElement.classList.add("done");
      btn.textContent = "Done";
      completed++;
      document.getElementById("status").textContent =
        `Status: ${completed} of 9 steps completed.`;
    }
  </script>
</body>
</html>
